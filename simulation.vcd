$date
	Fri Apr  4 10:31:02 2025
$end
$version
	Icarus Verilog
$end
$timescale
	1ns
$end
$scope module tb_spi_flash_controller $end
$var wire 1 ! o_SPI_MOSI $end
$var wire 1 " o_SPI_CS $end
$var wire 1 # o_SPI_CLK $end
$var wire 1 $ o_MemoryReady $end
$var wire 8 % o_DATA [7:0] $end
$var reg 1 & clk $end
$var reg 16 ' i_ADDRESS_BUS [15:0] $end
$var reg 8 ( i_DataBus [7:0] $end
$var reg 1 ) i_Q $end
$var reg 1 * i_RW $end
$var reg 1 + i_SPI_MISO $end
$var reg 1 , i_enable $end
$var reg 1 - reset $end
$var reg 1 . spi_ce $end
$scope module uut $end
$var wire 1 & clk $end
$var wire 16 / i_ADDRESS_BUS [15:0] $end
$var wire 8 0 i_DataBus [7:0] $end
$var wire 1 ) i_Q $end
$var wire 1 * i_RW $end
$var wire 1 + i_SPI_MISO $end
$var wire 1 , i_enable $end
$var wire 1 - reset $end
$var wire 1 . spi_ce $end
$var wire 8 1 spi_page_command [7:0] $end
$var wire 8 2 spi_read_command [7:0] $end
$var wire 8 3 spi_write_enable_command [7:0] $end
$var reg 6 4 bit_counter [5:0] $end
$var reg 1 5 clock_delay $end
$var reg 1 $ o_MemoryReady $end
$var reg 1 # o_SPI_CLK $end
$var reg 1 " o_SPI_CS $end
$var reg 1 ! o_SPI_MOSI $end
$var reg 8 6 o_spi_data [7:0] $end
$var reg 24 7 spi_address [23:0] $end
$var reg 8 8 spi_datawrite [7:0] $end
$var reg 1 9 spi_page_active $end
$var reg 1 : spi_read_active $end
$var reg 1 ; spi_write_active $end
$upscope $end
$scope task spi_flash_read $end
$var reg 16 < address [15:0] $end
$upscope $end
$scope task spi_flash_write $end
$var reg 16 = address [15:0] $end
$var reg 8 > databus [7:0] $end
$upscope $end
$upscope $end
$enddefinitions $end
#0
$dumpvars
bx >
bx =
bx <
0;
0:
09
bx 8
b0 7
bx 6
05
b0 4
b110 3
b11 2
b10 1
b0 0
b0 /
0.
x-
x,
x+
1*
x)
b0 (
b0 '
0&
bx %
x$
x#
x"
x!
$end
#6
1"
1$
0#
z!
1&
#12
0&
#18
1&
#24
0&
#30
1&
#36
0&
#42
1&
#48
0&
#54
1&
#60
0&
#66
1&
#72
0&
#78
1&
#84
0&
#90
1&
#96
0&
#100
1-
b11101010101010 <
#102
1&
#108
0&
#110
0-
#114
b0 %
b0 6
1&
#120
0&
1-
#126
1&
#132
0&
#138
1&
#144
0&
1,
1)
b11101010101010 '
b11101010101010 /
1.
#150
1:
b101010101010 7
1&
#156
0&
#162
0!
15
0$
0"
1&
#168
0&
#174
b1 4
1#
1&
#180
0&
#186
0#
1&
#192
0&
#198
b10 4
1#
1&
#204
0&
#210
0#
1&
#216
0&
#222
b11 4
1#
1&
#228
0&
#234
0#
1&
#240
0&
#246
b100 4
1#
1&
#252
0&
#258
0#
1&
#264
0&
#270
b101 4
1#
1&
#276
0&
#282
0#
1&
#288
0&
#294
b110 4
1#
1&
#300
0&
#306
1!
0#
1&
#312
0&
#318
b111 4
1#
1&
#324
0&
#330
0#
1&
#336
0&
#342
b1000 4
1#
1&
#348
0&
#354
0!
0#
1&
#360
0&
#366
b1001 4
1#
1&
#372
0&
#378
0#
1&
#384
0&
#390
b1010 4
1#
1&
#396
0&
#402
0#
1&
#408
0&
#414
b1011 4
1#
1&
#420
0&
#426
0#
1&
#432
0&
#438
b1100 4
1#
1&
#444
0&
#450
0#
1&
#456
0&
#462
b1101 4
1#
1&
#468
0&
#474
0#
1&
#480
0&
#486
b1110 4
1#
1&
#492
0&
#498
0#
1&
#504
0&
#510
b1111 4
1#
1&
#516
0&
#522
0#
1&
#528
0&
#534
b10000 4
1#
1&
#540
0&
#546
0#
1&
#552
0&
#558
b10001 4
1#
1&
#564
0&
#570
0#
1&
#576
0&
#582
b10010 4
1#
1&
#588
0&
#594
0#
1&
#600
0&
#606
b10011 4
1#
1&
#612
0&
#618
0#
1&
#624
0&
#630
b10100 4
1#
1&
#636
0&
#642
1!
0#
1&
#648
0&
#654
b10101 4
1#
1&
#660
0&
#666
0!
0#
1&
#672
0&
#678
b10110 4
1#
1&
#684
0&
#690
1!
0#
1&
#696
0&
#702
b10111 4
1#
1&
#708
0&
#714
0!
0#
1&
#720
0&
#726
b11000 4
1#
1&
#732
0&
#738
1!
0#
1&
#744
0&
#750
b11001 4
1#
1&
#756
0&
#762
0!
0#
1&
#768
0&
#774
b11010 4
1#
1&
#780
0&
#786
1!
0#
1&
#792
0&
#798
b11011 4
1#
1&
#804
0&
#810
0!
0#
1&
#816
0&
#822
b11100 4
1#
1&
#828
0&
#834
1!
0#
1&
#840
0&
#846
b11101 4
1#
1&
#852
0&
#858
0!
0#
1&
#864
0&
#870
b11110 4
1#
1&
#876
0&
#882
1!
0#
1&
#888
0&
#894
b11111 4
1#
1&
#900
0&
#906
0!
0#
1&
#912
0&
#918
b100000 4
1#
1&
#924
0&
#930
0#
1&
#936
0&
#942
b100001 4
b10000000 %
b10000000 6
1#
1&
1+
#948
0&
#954
0#
1&
#960
0&
#966
b100010 4
b11000000 %
b11000000 6
1#
1&
#972
0&
#978
0#
1&
#984
0&
#990
b100011 4
b11100000 %
b11100000 6
1#
1&
#996
0&
#1002
0#
1&
#1008
0&
#1014
b100100 4
b11110000 %
b11110000 6
1#
1&
#1020
0&
#1026
0#
1&
#1032
0&
#1038
b100101 4
b11111000 %
b11111000 6
1#
1&
#1044
0&
#1050
0#
1&
#1056
0&
#1062
b100110 4
1#
1&
0+
#1068
0&
#1074
0#
1&
#1080
0&
#1086
b100111 4
b11111010 %
b11111010 6
1#
1&
1+
#1092
0&
#1098
0#
1&
#1104
0&
#1110
b101000 4
1#
1&
0.
0+
#1116
0&
#1122
1$
0:
0#
1&
#1128
0&
#1134
1"
z!
1&
#1140
0&
#1146
1&
#1152
0&
#1158
1&
#1164
0&
#1170
1&
#1176
0&
#1182
1&
#1188
0&
#1194
1&
#1200
0&
#1206
1&
#1210
b10101010 >
b11000000000000 =
#1212
0&
#1218
1&
#1224
0&
#1230
1&
#1236
0&
#1242
1&
#1248
0&
#1254
1&
#1260
0&
#1266
1&
#1272
0&
#1278
1&
#1282
b10101010 (
b10101010 0
b11000000000000 '
b11000000000000 /
1.
0*
#1284
0&
#1290
b10101010 8
05
b0 4
1;
b0 7
1&
#1296
0&
#1302
0!
15
0$
0"
1&
#1308
0&
#1314
b1 4
1#
1&
#1320
0&
#1326
0#
1&
#1332
0&
#1338
b10 4
1#
1&
#1344
0&
#1350
0#
1&
#1356
0&
#1362
b11 4
1#
1&
#1368
0&
#1374
0#
1&
#1380
0&
#1386
b100 4
1#
1&
#1392
0&
#1398
0#
1&
#1404
0&
#1410
b101 4
1#
1&
#1416
0&
#1422
1!
0#
1&
#1428
0&
#1434
b110 4
1#
1&
#1440
0&
#1446
0#
1&
#1452
0&
#1458
b111 4
1#
1&
#1464
0&
#1470
0!
0#
1&
#1476
0&
#1482
b1000 4
1#
1&
#1488
0&
#1494
1"
05
b0 4
19
0#
1&
#1500
0&
#1506
15
0"
1&
#1512
0&
#1518
b1 4
1#
1&
#1524
0&
#1530
0#
1&
#1536
0&
#1542
b10 4
1#
1&
#1548
0&
#1554
0#
1&
#1560
0&
#1566
b11 4
1#
1&
#1572
0&
#1578
0#
1&
#1584
0&
#1590
b100 4
1#
1&
#1596
0&
#1602
0#
1&
#1608
0&
#1614
b101 4
1#
1&
#1620
0&
#1626
0#
1&
#1632
0&
#1638
b110 4
1#
1&
#1644
0&
#1650
1!
0#
1&
#1656
0&
#1662
b111 4
1#
1&
#1668
0&
#1674
0!
0#
1&
#1680
0&
#1686
b1000 4
1#
1&
#1692
0&
#1698
0#
1&
#1704
0&
#1710
b1001 4
1#
1&
#1716
0&
#1722
0#
1&
#1728
0&
#1734
b1010 4
1#
1&
#1740
0&
#1746
0#
1&
#1752
0&
#1758
b1011 4
1#
1&
#1764
0&
#1770
0#
1&
#1776
0&
#1782
b1100 4
1#
1&
#1788
0&
#1794
0#
1&
#1800
0&
#1806
b1101 4
1#
1&
#1812
0&
#1818
0#
1&
#1824
0&
#1830
b1110 4
1#
1&
#1836
0&
#1842
0#
1&
#1848
0&
#1854
b1111 4
1#
1&
#1860
0&
#1866
0#
1&
#1872
0&
#1878
b10000 4
1#
1&
#1884
0&
#1890
0#
1&
#1896
0&
#1902
b10001 4
1#
1&
#1908
0&
#1914
0#
1&
#1920
0&
#1926
b10010 4
1#
1&
#1932
0&
#1938
0#
1&
#1944
0&
#1950
b10011 4
1#
1&
#1956
0&
#1962
0#
1&
#1968
0&
#1974
b10100 4
1#
1&
#1980
0&
#1986
0#
1&
#1992
0&
#1998
b10101 4
1#
1&
#2004
0&
#2010
0#
1&
#2016
0&
#2022
b10110 4
1#
1&
#2028
0&
#2034
0#
1&
#2040
0&
#2046
b10111 4
1#
1&
#2052
0&
#2058
0#
1&
#2064
0&
#2070
b11000 4
1#
1&
#2076
0&
#2082
0#
1&
#2088
0&
#2094
b11001 4
1#
1&
#2100
0&
#2106
0#
1&
#2112
0&
#2118
b11010 4
1#
1&
#2124
0&
#2130
0#
1&
#2136
0&
#2142
b11011 4
1#
1&
#2148
0&
#2154
0#
1&
#2160
0&
#2166
b11100 4
1#
1&
#2172
0&
#2178
0#
1&
#2184
0&
#2190
b11101 4
1#
1&
#2196
0&
#2202
0#
1&
#2208
0&
#2214
b11110 4
1#
1&
#2220
0&
#2226
0#
1&
#2232
0&
#2238
b11111 4
1#
1&
#2244
0&
#2250
0#
1&
#2256
0&
#2262
b100000 4
1#
1&
#2268
0&
#2274
1!
0#
1&
#2280
0&
#2286
b100001 4
1#
1&
#2292
0&
#2298
0!
0#
1&
#2304
0&
#2310
b100010 4
1#
1&
#2316
0&
#2322
1!
0#
1&
#2328
0&
#2334
b100011 4
1#
1&
#2340
0&
#2346
0!
0#
1&
#2352
0&
#2358
b100100 4
1#
1&
#2364
0&
#2370
1!
0#
1&
#2376
0&
#2382
b100101 4
1#
1&
#2388
0&
#2394
0!
0#
1&
#2400
0&
#2406
b100110 4
1#
1&
#2412
0&
#2418
1!
0#
1&
#2424
0&
#2430
b100111 4
1#
1&
#2432
1*
0.
0,
0)
#2436
0&
#2442
0!
0#
1&
#2448
0&
#2454
b101000 4
1#
1&
#2460
0&
#2466
0;
09
0#
1&
#2472
0&
#2478
1"
1$
z!
1&
#2484
0&
#2490
1&
#2496
0&
#2502
1&
#2508
0&
#2514
1&
#2520
0&
#2526
1&
#2532
0&
